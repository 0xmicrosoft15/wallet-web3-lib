{"pageProps":{"docs":{"content":"# @web3-wallet/detect-provider\n\n## Install\n\n```base\npnpm add @web3-wallet/detect-provider\n```\n\n## Usage\n\n```typescript\nimport { detectProvider } from '@web3-wallet/detect-provider';\n\nconst provider = await detectProvider(options);\n\nif (provider) {\n  console.log('provider successfully detected!');\n\n  const chainId = await provider.request({\n    method: 'eth_chainId',\n  });\n} else {\n  // if the provider is not detected, detectEthereumProvider resolves to null\n  console.error('Failed to detect provider', error);\n}\n```\n\n## API\n\n### types\n\n```typescript\nexport interface DetectProviderOptions {\n  providerName?: string;\n  eventName?: string;\n  detectInterval?: Milliseconds;\n  timeout?: Milliseconds;\n  silent?: boolean;\n};\n\n/**\n * Detect and the wallet provider from the host environment.\n *\n * @param options\n * @param options.providerName - the injected provider name, default to 'ethereum'\n * @param options.eventName - the event name that is fired when the provider is injected,\n *  default to 'ethereum#initialized'\n * @param options.detectInterval - Milliseconds, the interval to check for the provider\n *  in the host environment. Default: 50\n * @param options.silent - Whether to silence console errors. Does not affect\n *  thrown errors. Default: false\n * @param options.timeout - Milliseconds to wait for 'ethereum#initialized' to\n *  be dispatched. Default: 3000\n * @returns A Promise that resolves with the Provider if it is detected within the given timeout,\n *  otherwise undefined.\n */\nexport const detectProvider = <T extends Provider = Provider>(\n  options: DetectProviderOptions = {}\n): Promise<T | undefined> {\n  // ...\n};\n```\n\n## Context\n\nWallet providers are usually injected to the host environment. In order to connect to a wallet, dApps need to retrieve the wallet provider from the host environment. This library is here to help detect and retrieve the wallet provider from the host environment. @web3-wallet/detect-provider is designed to be able to detect all kinds of wallet providers from the host environment.\n\n## Synchronous and Asynchronous Injection\n\nProviders could be injected synchronously or asynchronously:\n\n- Synchronously injected providers is available by the time the dApp starts it's execution.\n- Asynchronously injected providers may not become available until a later time in the page lifecycle.\n\nAs an example, the MetaMask extension provider is injected synchronously. But the MetaMask mobile provider is injected asynchronously. To notify dApps of asynchronous injection, MetaMask dispatches the ethereum#initialized event on window immediately after the provider has been set as window.ethereum.\n\nHowever, We can't ensure that all wallets work the the way as MetaMsk. for example, some wallets don't fire the `ethereum#initialized` event properly when the provider is injected asynchronously. To make sure that we are able retrieve the provider correctly, we need to periodically check/poll for the existence of the provider from the host environment.\n\n## References\n\n- [MetaMask/detect-provider](https://github.com/MetaMask/detect-provider#synchronous-and-asynchronous-injection=)\n","toc":[{"id":"install","indent":1,"content":"Install"},{"id":"usage","indent":1,"content":"Usage"},{"id":"api","indent":1,"content":"API"},{"id":"types","indent":2,"content":"types"},{"id":"context","indent":1,"content":"Context"},{"id":"synchronous-and-asynchronous-injection","indent":1,"content":"Synchronous and Asynchronous Injection"},{"id":"references","indent":1,"content":"References"}]},"route":{"label":"Provider Detection","slug":["provider-detection"],"path":"/home/runner/work/web3-wallet/web3-wallet/packages/detect-provider/README.md"}},"__N_SSG":true}