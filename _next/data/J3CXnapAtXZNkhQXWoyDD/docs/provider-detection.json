{"pageProps":{"docs":{"content":"# @react-web3-wallet/detect-provider\n\n## Install\n\n```base\npnpm add @react-web3-wallet/detect-provider\n```\n\n## Usage\n\n```typescript\nimport { detectProvider } from '@react-web3-wallet/detect-provider';\n\nconst provider = await detectProvider(options);\n\nif (provider) {\n  console.log('provider successfully detected!');\n\n  const chainId = await provider.request({\n    method: 'eth_chainId',\n  });\n} else {\n  // if the provider is not detected, detectEthereumProvider resolves to null\n  console.error('Failed to detect provider', error);\n}\n```\n\n## API\n\n### types\n\n```typescript\nexport interface DetectProviderOptions {\n  providerName?: string;\n  eventName?: string;\n  detectInterval?: Milliseconds;\n  timeout?: Milliseconds;\n  silent?: boolean;\n};\n\n/**\n * Detect and the wallet provider from the host environment.\n *\n * @param options\n * @param options.providerName - the injected provider name, default to 'ethereum'\n * @param options.eventName - the event name that is fired when the provider is injected,\n *  default to 'ethereum#initialized'\n * @param options.detectInterval - Milliseconds, the interval to check for the provider\n *  in the host environment. Default: 50\n * @param options.silent - Whether to silence console errors. Does not affect\n *  thrown errors. Default: false\n * @param options.timeout - Milliseconds to wait for 'ethereum#initialized' to\n *  be dispatched. Default: 3000\n * @returns A Promise that resolves with the Provider if it is detected within the given timeout,\n *  otherwise undefined.\n */\nexport const detectProvider = <T extends Provider = Provider>(\n  options: DetectProviderOptions = {}\n): Promise<T | undefined> {\n  // ...\n};\n```\n\n## Context\n\nIn most cases, wallet providers are injected into the host environment. This means that to connect a dApp to a wallet, the dApp needs to retrieve the wallet provider from the host environment. The @react-web3-wallet/detect-provider library is designed to simplify this process.\n\nBy using @react-web3-wallet/detect-provider, you can detect and retrieve wallet providers from the host environment, regardless of the specific type of wallet being used. This ensures that your dApp can seamlessly connect to the user's chosen wallet provider.\n\n## Synchronous and Asynchronous Injection\n\nWallet providers can be injected into the host environment either synchronously or asynchronously. Synchronously injected providers are available immediately when the dApp starts executing, while asynchronously injected providers may not become available until a later point in the page lifecycle.\n\nFor example, the MetaMask extension provider is injected synchronously, while the MetaMask mobile provider is injected asynchronously. To notify dApps of asynchronous injection, MetaMask dispatches the ethereum#initialized event on the window object immediately after the provider has been set as window.ethereum.\n\nHowever, it's important to note that not all wallets follow the same injection pattern as MetaMask. Some wallets may not fire the ethereum#initialized event properly when the provider is injected asynchronously. In such cases, you may need to periodically check or poll for the existence of the provider from the host environment to ensure that you can retrieve it correctly.\n\n## References\n\n- [MetaMask/detect-provider](https://github.com/MetaMask/detect-provider#synchronous-and-asynchronous-injection=)\n","toc":[{"id":"install","indent":1,"content":"Install"},{"id":"usage","indent":1,"content":"Usage"},{"id":"api","indent":1,"content":"API"},{"id":"types","indent":2,"content":"types"},{"id":"context","indent":1,"content":"Context"},{"id":"synchronous-and-asynchronous-injection","indent":1,"content":"Synchronous and Asynchronous Injection"},{"id":"references","indent":1,"content":"References"}]},"route":{"label":"Provider Detection","slug":["provider-detection"],"path":"/home/runner/work/web3-wallet/web3-wallet/packages/detect-provider/README.md"}},"__N_SSG":true}